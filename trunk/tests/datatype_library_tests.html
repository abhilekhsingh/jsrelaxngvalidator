<html>
  <head>
    <script language="JavaScript" src="../jsunit/app/jsUnitCore.js"></script>
	<script language="JavaScript" src="../jsrelaxngvalidator/datatype_library.js"></script>
	<script language="JavaScript" src="../jsrelaxngvalidator/validator_objects.js"></script>
    <script language="JavaScript">
	var datatypeLibrary = new DatatypeLibrary();

	var uri = "http://www.w3.org/2001/XMLSchema-datatypes";
    var paramList;
    var map;
    var context;
	
    function setUp() {
        paramList = new Array();
        map = new Array();
        context = new Context(uri, map);
    }
    
	function testDatatypeAllows_language() {
        datatypeAllows_true("language", "GB");
	}
    function testDatatypeAllows_language_false() {
        datatypeAllows_false("language", "1GE");
	}
    
    function testDatatypeAllows_Name() {
        datatypeAllows_true("Name", "markup_name");
	}
    function testDatatypeAllows_Name_false() {
        datatypeAllows_false("Name", "sfe:markup_name");
	}
    
    function testDatatypeAllows_NCName() {
        datatypeAllows_true("NCName", "markup_name");
	}
    function testDatatypeAllows_NCName_false() {
        datatypeAllows_false("NCName", "sfe:markup_name");
	}
    
    function testDatatypeAllows_normalizedString() {
        datatypeAllows_true("normalizedString", "string");
	}
    function testDatatypeAllows_normalizedString_false() {
        datatypeAllows_false("normalizedString", " str ing ");
	}
    
    function testDatatypeAllows_QName() {
        datatypeAllows_true("QName", "string");
	}
    function testDatatypeAllows_QName_false() {
        datatypeAllows_false("QName", "str	ing ");
	}
    
    function datatypeAllows_true(localname, string) {
        var datatype = new Datatype(uri, localname);
        debug("testDatatypeAllows localname [" + localname + "] string [" + string + "]");
		var resultPattern = datatypeLibrary.datatypeAllows(datatype, paramList, string, context);
		assertTrue(resultPattern instanceof Empty);
    }
    
    function datatypeAllows_false(localname, string) {
        var datatype = new Datatype(uri, localname);
        debug("testDatatypeAllows localname [" + localname + "] string [" + string + "]");
		var resultPattern = datatypeLibrary.datatypeAllows(datatype, paramList, string, context);
		assertTrue(resultPattern instanceof NotAllowed);
    }
    
    

    </script>
  </head>
  <body>
    This is a Test Page for datatype_library.js
  </body>
</html>
